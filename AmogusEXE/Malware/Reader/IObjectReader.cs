using System;
using System.ComponentModel;
using System.IO;
using System.Text.Json;
using System.Threading.Tasks;

namespace AmogusEXE.Malware.Reader
{
    public interface IObjectReader
    {
        protected string FileName
        {
            get;
            set;
        }
        public string RawFileData
        {
            get;
            set;
        }
        public dynamic ParsedFileData
        {
            get;
            set;
        }
        protected virtual string Read()
        {
            if (!String.IsNullOrEmpty(FileName)) return File.ReadAllText(FileName);
            throw new ArgumentNullException(nameof(FileName), "File's name can't be undefined!");
        }
        protected virtual void Init(string filename)
        {
            FileName = filename;
        }
        protected dynamic Parse(string data);
        
        public dynamic Initialize(string path)
        {
            Init(path); return Parse(Read());
        }

        public dynamic Initialize(string data, int a=0)
        {
            return Parse(data);
        }
    }
}